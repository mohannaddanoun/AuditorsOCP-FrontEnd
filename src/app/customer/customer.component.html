<div class="container">
  <div class="add-data-container">
    <button class="button" (click)="toManager()">Manager Dashboard</button>

  </div>
<div class="container">
    <h2>إدارة العملاء</h2>
  
    <form (submit)="addCustomer()">
      <div>
        <label for="nationalId">الرقم الوطني:</label>
        <input id="nationalId" type="text"  [(ngModel)]="customer.nationalId" name="nationalId" maxlength="10"  required  />
      </div>
      <div>
        <label for="taxNumber">الرقم الضريبي:</label>
        <input id="taxNumber" type="text" [(ngModel)]="customer.taxNumber" name="taxNumber" required />
      </div>
      <div>
        <label for="customerName">اسم العميل:</label>
        <input id="customerName" type="text" [(ngModel)]="customer.customerName" name="customerName" required />
      </div>
      <div>
        <label for="registrationEntity">جهة التسجيل:</label>
        <select id="registrationEntity" [(ngModel)]="customer.registrationEntity" name="registrationEntity" (change)="onRegistrationEntityChange()">
          <option *ngFor="let entity of registrationEntities" [value]="entity">{{ entity }}</option>
        </select>
      </div>
      <div>
        <label for="companyType">نوع الشركة:</label>
        <select id="companyType" [(ngModel)]="customer.companyType" name="companyType">
          <option *ngFor="let type of filteredCompanyTypes" [value]="type">{{ type }}</option>
        </select>
      </div>
      <div>
        <label for="financialYear">السنة المالية:</label>
        <input id="financialYear" type="number" [(ngModel)]="customer.financialYear" name="financialYear" required />
      </div>
      <button type="submit">إضافة</button>
    </form>
  
    <hr />
  
    <table>
        <thead>
          <tr>
            <th>الرقم الوطني</th>
            <th>الرقم الضريبي</th>
            <th>اسم العميل</th>
            <th>جهة التسجيل</th>
            <th>نوع الشركة</th>
            <th>السنة المالية</th>
            <th>إجراءات</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let customer of customers; let i = index">
            <td>
              <input
                *ngIf="editIndex === i"
                type="text"
                [(ngModel)]="customer.nationalId"
              />
              <span *ngIf="editIndex !== i">{{ customer.nationalId }}</span>
            </td>
            <td>
              <input
                *ngIf="editIndex === i"
                type="text"
                [(ngModel)]="customer.taxNumber"
              />
              <span *ngIf="editIndex !== i">{{ customer.taxNumber }}</span>
            </td>
            <td>
              <input
                *ngIf="editIndex === i"
                type="text"
                [(ngModel)]="customer.customerName"
              />
              <span *ngIf="editIndex !== i">{{ customer.customerName }}</span>
            </td>
            <td>
              <input
                *ngIf="editIndex === i"
                type="text"
                [(ngModel)]="customer.registrationEntity"
              />
              <span *ngIf="editIndex !== i">{{ customer.registrationEntity }}</span>
            </td>
            <td>
              <input
                *ngIf="editIndex === i"
                type="text"
                [(ngModel)]="customer.companyType"
              />
              <span *ngIf="editIndex !== i">{{ customer.companyType }}</span>
            </td>
            <td>
              <input
                *ngIf="editIndex === i"
                type="text"
                [(ngModel)]="customer.financialYear"
              />
              <span *ngIf="editIndex !== i">{{ customer.financialYear }}</span>
            </td>
            <td>
              <button *ngIf="editIndex !== i" (click)="enableEdit(i)">تعديل</button>
              <button *ngIf="editIndex === i" (click)="saveEdit()">حفظ</button>
              <button (click)="deleteCustomer(customer.id)">حذف</button>
            </td>
          </tr>
        </tbody>
      </table>
  </div>
  <div >
    <button class="button" (click)="tologin()">Logout</button>
  </div>
  